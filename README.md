# Features

## Authentication

#### 1. Sign in 
``` dart
    Amplify.Auth.signIn(username: email, password: password);
```

#### 2. Sign up
``` dart
    Amplify.Auth.signUp(
          username: email,
          password: password,
          options: CognitoSignUpOptions(userAttributes: userAttributes))
```

#### 3. Sending confirmation code
``` dart
    Amplify.Auth.confirmSignUp(
          username: email, confirmationCode: code)
```

#### 4. Logout
``` dart
    Amplify.Auth.signOut()
```

#### 5. Check user session
``` dart
    Amplify.Auth.fetchAuthSession()
```
Returns __AuthSession__. If user is signed in we can also get current user
``` dart
     if (authSession.isSignedIn)
        authNotifier.currentUser = await Amplify.Auth.getCurrentUser();
```

## Create TODO
``` dart
  final String createToDoDocument = '''mutation MyMutation {
  createTodo(input: {description: "$todoDescription", name: "$todoName", userID: "${userNotifier.currentUser?.userId}"}) {
    name
    userID
    id
    description
  }
}
''';
```

## Delete TODO
``` dart
  String deleteToDoDocument = '''mutation MyMutation {
  deleteTodo(input: {id: "$todoID", userID: "${authNotifier.currentUser?.userId}"}) {
    description
    name
    id
    userID
  }
}
 ''';
```

## Fetch TODO
``` dart
  String fetchingQuery = '''query MyQuery {
  listTodos(filter: {userID: {eq: "${authNotifier.currentUser?.userId}"}}) {
    items {
      description
      id
      name
      userID
    }
  }
}
''';
```

## Subscription
Example subscription will trigger each time we create new todo item:
``` dart
  String onCreateSubscription = '''subscription MySubscription {
  onCreateTodo {
    id
    description
    name
    userID
  }
} ''';
```
Registering subscription based on graphql document:
``` dart
Amplify.API.subscribe(
          request: GraphQLRequest<String>(document: onCreateSubscription),
```


## Model
TODO class is auto-generated by amplify based on defined graphql scheme on amplify console.
This model is then used in __TodoNotifier__ for storing list of all todo items
``` dart
 List<Todo> todos = [];
```
